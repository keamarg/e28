(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45412856"],{"8fdc":function(t,e,r){"use strict";r.r(e);r("b0c0");var a=r("7a23"),n={id:"account-page"},o={key:0},i={"data-test":"welcome-message"},s={id:"favorites"},u=Object(a["h"])("strong",null,"Your Favorite Quizzes",-1),c={key:0},l={class:"clean-list"},d=Object(a["h"])("br",null,null,-1),b={key:1,class:"loginForm"},h=Object(a["h"])("h2",null,"Login",-1),O=Object(a["g"])(" Email: "),m=Object(a["g"])(" Password: "),j={key:2},p={key:0,class:"fail"},g=Object(a["h"])("p",null,"Or create new user",-1),f={key:3,id:"registerForm",class:"loginForm"},v=Object(a["h"])("h2",null,"Register",-1),w=Object(a["g"])(" Name: "),F=Object(a["g"])(" Email: "),q=Object(a["g"])(" Password: "),y=Object(a["h"])("p",null,"Or login with existing user",-1);function k(t,e,r,k,$,z){var D=Object(a["x"])("router-link"),U=Object(a["x"])("error-field");return Object(a["q"])(),Object(a["e"])("div",n,[z.user?(Object(a["q"])(),Object(a["e"])("div",o,[Object(a["h"])("h2",i,"Hi, "+Object(a["z"])(z.user.name)+"!",1),Object(a["h"])("div",s,[u,$.favorites&&0==$.favorites.length?(Object(a["q"])(),Object(a["e"])("p",c,"No favorites yet.")):Object(a["f"])("",!0),Object(a["h"])("ul",l,[(Object(a["q"])(!0),Object(a["e"])(a["a"],null,Object(a["w"])($.favorites,(function(e,r){return Object(a["q"])(),Object(a["e"])("li",{key:r},[Object(a["h"])(D,{to:"/quiz"},{default:Object(a["D"])((function(){return[Object(a["h"])("button",{class:"btn favBtn",onClick:function(r){return t.$emit("update-quiz",e)}},Object(a["z"])(e)+" quiz ",9,["onClick"])]})),_:2},1024)])})),128))]),d]),Object(a["h"])("button",{onClick:e[1]||(e[1]=function(){return z.logout&&z.logout.apply(z,arguments)}),"data-test":"logout-button"},"Logout")])):z.loginForm?(Object(a["q"])(),Object(a["e"])("div",b,[h,Object(a["h"])("div",null,[Object(a["h"])("label",null,[O,Object(a["E"])(Object(a["h"])("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=function(t){return $.data.email=t}),"data-test":"email-input"},null,512),[[a["B"],$.data.email]])])]),Object(a["h"])("div",null,[Object(a["h"])("label",null,[m,Object(a["E"])(Object(a["h"])("input",{type:"password","onUpdate:modelValue":e[3]||(e[3]=function(t){return $.data.password=t}),"data-test":"password-input"},null,512),[[a["B"],$.data.password]])])])])):Object(a["f"])("",!0),z.loginForm&&0==this.user?(Object(a["q"])(),Object(a["e"])("span",j,[Object(a["h"])("button",{onClick:e[4]||(e[4]=function(){return z.login&&z.login.apply(z,arguments)}),class:"btn","data-test":"login-button"}," Login "),$.errors?(Object(a["q"])(),Object(a["e"])("p",p,Object(a["z"])($.errors[0]),1)):Object(a["f"])("",!0),g,Object(a["h"])("button",{onClick:e[5]||(e[5]=function(t){return z.changeForm("registerForm")})},"Create user")])):Object(a["f"])("",!0),z.registerForm&&!this.user?(Object(a["q"])(),Object(a["e"])("div",f,[v,Object(a["h"])("div",null,[Object(a["h"])("label",null,[w,Object(a["E"])(Object(a["h"])("input",{"data-test":"name-input",type:"text","onUpdate:modelValue":e[6]||(e[6]=function(t){return $.registrationData.name=t}),onInput:e[7]||(e[7]=function(){return z.validate&&z.validate.apply(z,arguments)})},null,544),[[a["B"],$.registrationData.name]])])]),$.errors&&"name"in $.errors?(Object(a["q"])(),Object(a["e"])(U,{key:0,errors:$.errors.name},null,8,["errors"])):Object(a["f"])("",!0),Object(a["h"])("div",null,[Object(a["h"])("label",null,[F,Object(a["E"])(Object(a["h"])("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=function(t){return $.registrationData.email=t}),onInput:e[9]||(e[9]=function(){return z.validate&&z.validate.apply(z,arguments)}),"data-test":"email-input"},null,544),[[a["B"],$.registrationData.email]])])]),$.errors&&"email"in $.errors?(Object(a["q"])(),Object(a["e"])(U,{key:1,errors:$.errors.email},null,8,["errors"])):Object(a["f"])("",!0),Object(a["h"])("div",null,[Object(a["h"])("label",null,[q,Object(a["E"])(Object(a["h"])("input",{"data-test":"password-input",type:"password","onUpdate:modelValue":e[10]||(e[10]=function(t){return $.registrationData.password=t}),onInput:e[11]||(e[11]=function(){return z.validate&&z.validate.apply(z,arguments)})},null,544),[[a["B"],$.registrationData.password]])])]),$.errors&&"password"in $.errors?(Object(a["q"])(),Object(a["e"])(U,{key:2,errors:$.errors.password},null,8,["errors"])):Object(a["f"])("",!0),Object(a["h"])("button",{"data-test":"create-button",onClick:e[12]||(e[12]=function(){return z.createUser&&z.createUser.apply(z,arguments)}),class:"btn"}," Create user "),y,Object(a["h"])("button",{onClick:e[13]||(e[13]=function(t){return z.changeForm("loginForm")})},"Login")])):Object(a["f"])("",!0)])}r("d81d");var $=r("0091"),z=r("ad5e"),D=r("1c4a"),U=r.n(D),C={components:{"error-field":z["a"]},data:function(){return{data:{email:localStorage.getItem("user"),password:""},registrationData:{name:"",email:"",password:""},errors:null,favorites:[]}},computed:{user:function(){return this.$store.state.user},registerForm:function(){return this.$store.state.registerForm},loginForm:function(){return this.$store.state.loginForm},questions:function(){return this.$store.state.questions}},watch:{user:function(){this.loadFavorites()}},mounted:function(){this.loadFavorites()},methods:{validate:function(){var t=new U.a(this.registrationData,{name:"required|between:3,20",email:"required|email",password:"required|between:8,20"});return t.fails()?this.errors=t.errors.all():this.errors=null,t.passes()},changeForm:function(t){"loginForm"==t?(this.data.email=localStorage.getItem("user"),this.$store.commit("setLoginForm",!0),this.$store.commit("setRegisterForm",!1)):(this.$store.commit("setLoginForm",!1),this.$store.commit("setRegisterForm",!0))},loadFavorites:function(){var t=this;this.user&&$["a"].get("favoritequiz/query?user_id="+this.user.id).then((function(e){t.favorites=e.data.favoritequiz.map((function(t){return t.quiz_id}))}))},login:function(){var t=this;$["a"].post("login",this.data).then((function(e){e.data.authenticated?t.$store.commit("setUser",e.data.user):t.errors=e.data.errors,t.user&&localStorage.setItem("user",t.$store.state.user.email)}))},logout:function(){var t=this;$["a"].post("logout").then((function(e){e.data.success&&t.$store.commit("setUser",!1),t.data.email="",t.data.password=""}))},createUser:function(){var t=this;this.validate()&&($["a"].post("register",this.registrationData).then((function(e){e.data.authenticated?t.$store.commit("setUser",e.data.user):t.errors=e.data.errors})),this.data=this.registrationData,this.data.password="",null==this.errors&&(this.$store.state.loginForm=!0,this.$store.state.registerForm=!1))}}};r("b32a");C.render=k;e["default"]=C},b32a:function(t,e,r){"use strict";r("bda9")},bda9:function(t,e,r){},d81d:function(t,e,r){"use strict";var a=r("23e7"),n=r("b727").map,o=r("1dde"),i=o("map");a({target:"Array",proto:!0,forced:!i},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-45412856.a855ec0e.js.map
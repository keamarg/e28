(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ea1ab1ea"],{"0a4a":function(t,e,r){"use strict";r("d76d")},"8fdc":function(t,e,r){"use strict";r.r(e);r("b0c0");var a=r("7a23"),n={id:"account-page"},o={key:0},i={id:"favorites"},s=Object(a["h"])("strong",null,"Your Favorite Quizzes",-1),c={key:0},u={class:"clean-list"},l=Object(a["h"])("br",null,null,-1),b={key:1,class:"loginForm"},d=Object(a["h"])("h2",null,"Login",-1),h=Object(a["g"])(" Email: "),O=Object(a["g"])(" Password: "),j={key:2},m={key:0,class:"fail"},f=Object(a["h"])("p",null,"Or create new user",-1),p={key:3,id:"registerForm",class:"loginForm"},g=Object(a["h"])("h2",null,"Register",-1),v=Object(a["g"])(" Name: "),w=Object(a["g"])(" Email: "),F=Object(a["g"])(" Password: "),q=Object(a["h"])("p",null,"Or login with existing user",-1);function y(t,e,r,y,k,$){var z=Object(a["x"])("router-link"),D=Object(a["x"])("error-field");return Object(a["q"])(),Object(a["e"])("div",n,[$.user?(Object(a["q"])(),Object(a["e"])("div",o,[Object(a["h"])("h2",null,"Hi, "+Object(a["z"])($.user.name)+"!",1),Object(a["h"])("div",i,[s,k.favorites&&0==k.favorites.length?(Object(a["q"])(),Object(a["e"])("p",c,"No favorites yet.")):Object(a["f"])("",!0),Object(a["h"])("ul",u,[(Object(a["q"])(!0),Object(a["e"])(a["a"],null,Object(a["w"])(k.favorites,(function(e,r){return Object(a["q"])(),Object(a["e"])("li",{key:r},[Object(a["h"])(z,{to:"/quiz"},{default:Object(a["D"])((function(){return[Object(a["h"])("button",{class:"btn favBtn",onClick:function(r){return t.$emit("update-quiz",e)}},Object(a["z"])(e)+" quiz ",9,["onClick"])]})),_:2},1024)])})),128))]),l]),Object(a["h"])("button",{onClick:e[1]||(e[1]=function(){return $.logout&&$.logout.apply($,arguments)})},"Logout")])):$.loginForm?(Object(a["q"])(),Object(a["e"])("div",b,[d,Object(a["h"])("div",null,[Object(a["h"])("label",null,[h,Object(a["E"])(Object(a["h"])("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=function(t){return k.data.email=t})},null,512),[[a["B"],k.data.email]])])]),Object(a["h"])("div",null,[Object(a["h"])("label",null,[O,Object(a["E"])(Object(a["h"])("input",{type:"password","onUpdate:modelValue":e[3]||(e[3]=function(t){return k.data.password=t})},null,512),[[a["B"],k.data.password]])])])])):Object(a["f"])("",!0),$.loginForm&&0==this.user?(Object(a["q"])(),Object(a["e"])("span",j,[Object(a["h"])("button",{onClick:e[4]||(e[4]=function(){return $.login&&$.login.apply($,arguments)}),class:"btn"},"Login"),k.errors?(Object(a["q"])(),Object(a["e"])("p",m,Object(a["z"])(k.errors[0]),1)):Object(a["f"])("",!0),f,Object(a["h"])("button",{onClick:e[5]||(e[5]=function(t){return $.changeForm("registerForm")})},"Create user")])):Object(a["f"])("",!0),$.registerForm&&!this.user?(Object(a["q"])(),Object(a["e"])("div",p,[g,Object(a["h"])("div",null,[Object(a["h"])("label",null,[v,Object(a["E"])(Object(a["h"])("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=function(t){return k.registrationData.name=t}),onInput:e[7]||(e[7]=function(){return $.validate&&$.validate.apply($,arguments)})},null,544),[[a["B"],k.registrationData.name]])])]),k.errors&&"name"in k.errors?(Object(a["q"])(),Object(a["e"])(D,{key:0,errors:k.errors.name},null,8,["errors"])):Object(a["f"])("",!0),Object(a["h"])("div",null,[Object(a["h"])("label",null,[w,Object(a["E"])(Object(a["h"])("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=function(t){return k.registrationData.email=t}),onInput:e[9]||(e[9]=function(){return $.validate&&$.validate.apply($,arguments)})},null,544),[[a["B"],k.registrationData.email]])])]),k.errors&&"email"in k.errors?(Object(a["q"])(),Object(a["e"])(D,{key:1,errors:k.errors.email},null,8,["errors"])):Object(a["f"])("",!0),Object(a["h"])("div",null,[Object(a["h"])("label",null,[F,Object(a["E"])(Object(a["h"])("input",{type:"password","onUpdate:modelValue":e[10]||(e[10]=function(t){return k.registrationData.password=t}),onInput:e[11]||(e[11]=function(){return $.validate&&$.validate.apply($,arguments)})},null,544),[[a["B"],k.registrationData.password]])])]),k.errors&&"password"in k.errors?(Object(a["q"])(),Object(a["e"])(D,{key:2,errors:k.errors.password},null,8,["errors"])):Object(a["f"])("",!0),Object(a["h"])("button",{onClick:e[12]||(e[12]=function(){return $.createUser&&$.createUser.apply($,arguments)}),class:"btn"},"Create user"),q,Object(a["h"])("button",{onClick:e[13]||(e[13]=function(t){return $.changeForm("loginForm")})},"Login")])):Object(a["f"])("",!0)])}r("d81d");var k=r("0091"),$=r("ad5e"),z=r("1c4a"),D=r.n(z),U={components:{"error-field":$["a"]},data:function(){return{data:{email:localStorage.getItem("user"),password:""},registrationData:{name:"",email:"",password:""},errors:null,favorites:[]}},computed:{user:function(){return this.$store.state.user},registerForm:function(){return this.$store.state.registerForm},loginForm:function(){return this.$store.state.loginForm},questions:function(){return this.$store.state.questions}},watch:{user:function(){this.loadFavorites()}},mounted:function(){this.loadFavorites()},methods:{validate:function(){var t=new D.a(this.registrationData,{name:"required|between:3,20",email:"required|email",password:"required|between:8,20"});return t.fails()?this.errors=t.errors.all():this.errors=null,t.passes()},changeForm:function(t){"loginForm"==t?(this.data.email=localStorage.getItem("user"),this.$store.commit("setLoginForm",!0),this.$store.commit("setRegisterForm",!1)):(this.$store.commit("setLoginForm",!1),this.$store.commit("setRegisterForm",!0))},loadFavorites:function(){var t=this;this.user&&k["a"].get("favoritequiz/query?user_id="+this.user.id).then((function(e){t.favorites=e.data.favoritequiz.map((function(t){return t.quiz_id}))}))},login:function(){var t=this;k["a"].post("login",this.data).then((function(e){e.data.authenticated?t.$store.commit("setUser",e.data.user):t.errors=e.data.errors,t.user&&localStorage.setItem("user",t.$store.state.user.email)}))},logout:function(){var t=this;k["a"].post("logout").then((function(e){e.data.success&&t.$store.commit("setUser",!1),t.data.email="",t.data.password=""}))},createUser:function(){var t=this;this.validate()&&(k["a"].post("register",this.registrationData).then((function(e){e.data.authenticated?t.$store.commit("setUser",e.data.user):t.errors=e.data.errors})),this.data=this.registrationData,this.data.password="",null==this.errors&&(this.$store.state.loginForm=!0,this.$store.state.registerForm=!1))}}};r("0a4a");U.render=y;e["default"]=U},d76d:function(t,e,r){},d81d:function(t,e,r){"use strict";var a=r("23e7"),n=r("b727").map,o=r("1dde"),i=o("map");a({target:"Array",proto:!0,forced:!i},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-ea1ab1ea.93ef919c.js.map
{"version":3,"sources":["webpack:///./src/components/pages/AccountPage.vue?182d","webpack:///./src/components/pages/AccountPage.vue","webpack:///./src/components/pages/AccountPage.vue?a676","webpack:///./node_modules/core-js/modules/es.array.map.js"],"names":["id","class","user","name","favorites","length","favorite","key","to","$emit","logout","loginForm","type","data","email","password","login","errors","changeForm","registerForm","registrationData","validate","createUser","components","ErrorField","localStorage","getItem","computed","this","$store","state","questions","watch","loadFavorites","mounted","methods","validator","fails","all","passes","formType","commit","get","then","response","favoritequiz","map","quiz_id","post","authenticated","setItem","success","render","$","$map","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","target","proto","forced","callbackfn","arguments","undefined"],"mappings":"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","file":"js/chunk-ea1ab1ea.93ef919c.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./AccountPage.vue?vue&type=style&index=0&id=1eebb16f&lang=css\"","<template>\n  <div id=\"account-page\">\n    <div v-if=\"user\">\n      <h2>Hi, {{ user.name }}!</h2>\n\n      <div id=\"favorites\">\n        <strong>Your Favorite Quizzes</strong>\n        <p v-if=\"favorites && favorites.length == 0\">No favorites yet.</p>\n        <ul class=\"clean-list\">\n          <li v-for=\"(favorite, key) in favorites\" v-bind:key=\"key\">\n            <router-link to=\"/quiz\">\n              <button\n                class=\"btn favBtn\"\n                v-on:click=\"$emit('update-quiz', favorite)\"\n              >\n                {{ favorite }} quiz\n              </button></router-link\n            >\n          </li>\n        </ul>\n        <br />\n      </div>\n\n      <button v-on:click=\"logout\">Logout</button>\n    </div>\n\n    <div v-else-if=\"loginForm\" class=\"loginForm\">\n      <h2>Login</h2>\n\n      <div>\n        <label>\n          Email:\n          <input type=\"text\" v-model=\"data.email\" />\n        </label>\n      </div>\n      <div>\n        <label>\n          Password:\n          <input type=\"password\" v-model=\"data.password\" />\n        </label>\n      </div>\n    </div>\n    <span v-if=\"loginForm && this.user == false\">\n      <button v-on:click=\"login\" class=\"btn\">Login</button>\n      <p v-if=\"errors\" class=\"fail\">{{ errors[0] }}</p>\n      <p>Or create new user</p>\n      <button v-on:click=\"changeForm('registerForm')\">Create user</button>\n    </span>\n    <div v-if=\"registerForm && !this.user\" id=\"registerForm\" class=\"loginForm\">\n      <h2>Register</h2>\n      <div>\n        <label>\n          Name:\n          <input\n            type=\"text\"\n            v-model=\"registrationData.name\"\n            v-on:input=\"validate\"\n          />\n        </label>\n      </div>\n      <error-field\n        v-if=\"errors && 'name' in errors\"\n        v-bind:errors=\"errors.name\"\n      ></error-field>\n      <div>\n        <label>\n          Email:\n          <input\n            type=\"text\"\n            v-model=\"registrationData.email\"\n            v-on:input=\"validate\"\n          />\n        </label>\n      </div>\n      <error-field\n        v-if=\"errors && 'email' in errors\"\n        v-bind:errors=\"errors.email\"\n      ></error-field>\n      <div>\n        <label>\n          Password:\n          <input\n            type=\"password\"\n            v-model=\"registrationData.password\"\n            v-on:input=\"validate\"\n          />\n        </label>\n      </div>\n      <error-field\n        v-if=\"errors && 'password' in errors\"\n        v-bind:errors=\"errors.password\"\n      ></error-field>\n\n      <button v-on:click=\"createUser\" class=\"btn\">Create user</button>\n      <p>Or login with existing user</p>\n      <button v-on:click=\"changeForm('loginForm')\">Login</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { axios } from \"@/common/app.js\";\nimport ErrorField from \"@/components/ErrorField.vue\";\nimport Validator from \"validatorjs\";\n\nexport default {\n  components: { \"error-field\": ErrorField },\n  data() {\n    return {\n      data: {\n        email: localStorage.getItem(\"user\"),\n        password: \"\",\n      },\n      registrationData: {\n        name: \"\",\n        email: \"\",\n        password: \"\",\n      },\n      errors: null,\n      favorites: [],\n    };\n  },\n  computed: {\n    user() {\n      return this.$store.state.user;\n    },\n    registerForm() {\n      return this.$store.state.registerForm;\n    },\n    loginForm() {\n      return this.$store.state.loginForm;\n    },\n    questions() {\n      return this.$store.state.questions;\n    },\n  },\n  watch: {\n    user() {\n      this.loadFavorites();\n    },\n  },\n  mounted() {\n    this.loadFavorites();\n  },\n  methods: {\n    validate() {\n      let validator = new Validator(this.registrationData, {\n        name: \"required|between:3,20\",\n        email: \"required|email\",\n        password: \"required|between:8,20\",\n      });\n\n      if (validator.fails()) {\n        this.errors = validator.errors.all();\n      } else {\n        this.errors = null;\n      }\n\n      return validator.passes();\n    },\n\n    //this method controls which form to show, and fills in the loginform with user data from localStorage\n    changeForm(formType) {\n      if (formType == \"loginForm\") {\n        this.data.email = localStorage.getItem(\"user\");\n        this.$store.commit(\"setLoginForm\", true);\n        this.$store.commit(\"setRegisterForm\", false);\n      } else {\n        this.$store.commit(\"setLoginForm\", false);\n        this.$store.commit(\"setRegisterForm\", true);\n      }\n    },\n    loadFavorites() {\n      if (this.user) {\n        axios\n          .get(\"favoritequiz/query?user_id=\" + this.user.id)\n          .then((response) => {\n            this.favorites = response.data.favoritequiz.map((favorite) => {\n              return favorite.quiz_id;\n            });\n          });\n      }\n    },\n\n    //the login method also sets localStorage with user data for the login field\n    login() {\n      axios.post(\"login\", this.data).then((response) => {\n        if (response.data.authenticated) {\n          this.$store.commit(\"setUser\", response.data.user);\n        } else {\n          this.errors = response.data.errors;\n        }\n        if (this.user) {\n          localStorage.setItem(\"user\", this.$store.state.user.email);\n        }\n      });\n    },\n    logout() {\n      axios.post(\"logout\").then((response) => {\n        if (response.data.success) {\n          this.$store.commit(\"setUser\", false);\n        }\n        this.data.email = \"\";\n        this.data.password = \"\";\n      });\n    },\n    createUser() {\n      if (this.validate()) {\n        axios.post(\"register\", this.registrationData).then((response) => {\n          if (response.data.authenticated) {\n            this.$store.commit(\"setUser\", response.data.user);\n          } else {\n            this.errors = response.data.errors;\n          }\n        });\n        this.data = this.registrationData;\n        this.data.password = \"\";\n        if (this.errors == null) {\n          this.$store.state.loginForm = true;\n          this.$store.state.registerForm = false;\n        }\n      }\n    },\n  },\n};\n</script>\n<style>\n.fail {\n  color: red;\n}\n.favBtn {\n  background-color: #ff851b;\n  font-size: 1rem;\n}\n.favBtn:hover {\n  background-color: #ff851b;\n  box-shadow: 0px 0px 10px #48abd8;\n}\n</style>","import { render } from \"./AccountPage.vue?vue&type=template&id=1eebb16f\"\nimport script from \"./AccountPage.vue?vue&type=script&lang=js\"\nexport * from \"./AccountPage.vue?vue&type=script&lang=js\"\n\nimport \"./AccountPage.vue?vue&type=style&index=0&id=1eebb16f&lang=css\"\nscript.render = render\n\nexport default script","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}
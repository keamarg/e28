(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d9777ae2"],{"8fdc":function(t,e,r){"use strict";r.r(e);r("b0c0");var n=r("7a23"),o={id:"account-page"},a={key:0},i={id:"favorites"},c=Object(n["h"])("strong",null,"Your Favorites",-1),s={key:0},u={key:1,id:"loginForm"},l=Object(n["h"])("h2",null,"Login",-1),b=Object(n["h"])("small",null," (Form is prefilled for demonstration purposes; remove in final application) ",-1),d=Object(n["g"])(" Email: "),O=Object(n["g"])(" Password: "),j={key:2},h={key:0},f=Object(n["h"])("p",null,"Or create new user",-1),p={key:3,id:"registerForm"},g=Object(n["h"])("h2",null,"Register",-1),m=Object(n["g"])(" Name: "),v=Object(n["g"])(" Email: "),y=Object(n["g"])(" Password: "),w=Object(n["h"])("p",null,"Or login with existing user",-1),F={key:0};function k(t,e,r,k,q,D){return Object(n["q"])(),Object(n["e"])("div",o,[D.user?(Object(n["q"])(),Object(n["e"])("div",a,[Object(n["h"])("h2",null,"Hi, "+Object(n["z"])(D.user.name)+"!",1),Object(n["h"])("div",i,[c,q.favorites&&0==q.favorites.length?(Object(n["q"])(),Object(n["e"])("p",s,"No favorites yet.")):Object(n["f"])("",!0),(Object(n["q"])(!0),Object(n["e"])(n["a"],null,Object(n["w"])(q.favorites,(function(t,e){return Object(n["q"])(),Object(n["e"])("li",{key:e},Object(n["z"])(t.name),1)})),128))]),Object(n["h"])("button",{onClick:e[1]||(e[1]=function(){return D.logout&&D.logout.apply(D,arguments)})},"Logout")])):q.loginForm?(Object(n["q"])(),Object(n["e"])("div",u,[l,b,Object(n["h"])("div",null,[Object(n["h"])("label",null,[d,Object(n["G"])(Object(n["h"])("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=function(t){return q.data.email=t})},null,512),[[n["D"],q.data.email]])])]),Object(n["h"])("div",null,[Object(n["h"])("label",null,[O,Object(n["G"])(Object(n["h"])("input",{type:"password","onUpdate:modelValue":e[3]||(e[3]=function(t){return q.data.password=t})},null,512),[[n["D"],q.data.password]])])])])):Object(n["f"])("",!0),q.loginForm&&0==this.user?(Object(n["q"])(),Object(n["e"])("span",j,[Object(n["h"])("button",{onClick:e[4]||(e[4]=function(){return D.login&&D.login.apply(D,arguments)})},"Login"),q.errors?(Object(n["q"])(),Object(n["e"])("ul",h,[(Object(n["q"])(!0),Object(n["e"])(n["a"],null,Object(n["w"])(q.errors,(function(t,e){return Object(n["q"])(),Object(n["e"])("li",{class:"error",key:e},Object(n["z"])(t),1)})),128))])):Object(n["f"])("",!0),f,Object(n["h"])("button",{onClick:e[5]||(e[5]=function(t){q.registerForm=!0,q.loginForm=!1})}," Create user ")])):Object(n["f"])("",!0),q.registerForm&&!this.user?(Object(n["q"])(),Object(n["e"])("div",p,[g,Object(n["h"])("div",null,[Object(n["h"])("label",null,[m,Object(n["G"])(Object(n["h"])("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=function(t){return q.registrationData.name=t})},null,512),[[n["D"],q.registrationData.name]])])]),Object(n["h"])("div",null,[Object(n["h"])("label",null,[v,Object(n["G"])(Object(n["h"])("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=function(t){return q.registrationData.email=t})},null,512),[[n["D"],q.registrationData.email]])])]),Object(n["h"])("div",null,[Object(n["h"])("label",null,[y,Object(n["G"])(Object(n["h"])("input",{type:"password","onUpdate:modelValue":e[8]||(e[8]=function(t){return q.registrationData.password=t})},null,512),[[n["D"],q.registrationData.password]])])]),Object(n["h"])("button",{onClick:e[9]||(e[9]=function(){return D.createUser&&D.createUser.apply(D,arguments)})},"Create user"),w,Object(n["h"])("button",{onClick:e[10]||(e[10]=function(t){q.loginForm=!0,q.registerForm=!1})}," Login "),q.errors?(Object(n["q"])(),Object(n["e"])("ul",F,[(Object(n["q"])(!0),Object(n["e"])(n["a"],null,Object(n["w"])(q.errors,(function(t,e){return Object(n["q"])(),Object(n["e"])("li",{class:"error",key:e},Object(n["z"])(t),1)})),128))])):Object(n["f"])("",!0)])):Object(n["f"])("",!0)])}r("d81d");var q=r("0091"),D={data:function(){return{registerForm:!0,loginForm:!1,data:{email:"jill@harvard.edu",password:"asdfasdf"},registrationData:{name:"",email:"",password:""},errors:null,favorites:[]}},computed:{user:function(){return this.$store.state.user},products:function(){return this.$store.state.products}},methods:{loadFavorites:function(){var t=this;this.user&&q["a"].get("favorite/query?user_id="+this.user.id).then((function(e){t.favorites=e.data.favorite.map((function(e){return t.$store.getters.getProductById(e.product_id)}))}))},login:function(){var t=this;q["a"].post("login",this.data).then((function(e){e.data.authenticated?t.$store.commit("setUser",e.data.user):t.errors=e.data.errors}))},logout:function(){var t=this;q["a"].post("logout").then((function(e){e.data.success&&t.$store.commit("setUser",null)}))},createUser:function(){var t=this;q["a"].post("register",this.registrationData).then((function(e){e.data.authenticated?t.$store.commit("setUser",e.data.user):t.errors=e.data.errors})),this.data=this.registrationData,this.loginForm=!0,this.registerForm=!1}},watch:{user:function(){this.loadFavorites()}},mounted:function(){this.loadFavorites()}};D.render=k;e["default"]=D},b0c0:function(t,e,r){var n=r("83ab"),o=r("9bf2").f,a=Function.prototype,i=a.toString,c=/^\s*function ([^ (]*)/,s="name";n&&!(s in a)&&o(a,s,{configurable:!0,get:function(){try{return i.call(this).match(c)[1]}catch(t){return""}}})},d81d:function(t,e,r){"use strict";var n=r("23e7"),o=r("b727").map,a=r("1dde"),i=a("map");n({target:"Array",proto:!0,forced:!i},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-d9777ae2.b1dd841d.js.map
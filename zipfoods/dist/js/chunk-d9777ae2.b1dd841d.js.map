{"version":3,"sources":["webpack:///./src/components/pages/AccountPage.vue","webpack:///./src/components/pages/AccountPage.vue?b3b5","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./node_modules/core-js/modules/es.array.map.js"],"names":["id","user","name","favorites","length","favorite","key","logout","loginForm","type","data","email","password","login","errors","error","index","class","registerForm","registrationData","createUser","computed","this","$store","state","products","methods","loadFavorites","get","then","response","map","getters","getProductById","product_id","post","authenticated","commit","success","watch","mounted","render","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","call","match","$","$map","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","target","proto","forced","callbackfn","arguments","undefined"],"mappings":"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","file":"js/chunk-d9777ae2.b1dd841d.js","sourcesContent":["<template>\n  <div id=\"account-page\">\n    <div v-if=\"user\">\n      <h2>Hi, {{ user.name }}!</h2>\n\n      <div id=\"favorites\">\n        <strong>Your Favorites</strong>\n        <p v-if=\"favorites && favorites.length == 0\">No favorites yet.</p>\n        <li v-for=\"(favorite, key) in favorites\" v-bind:key=\"key\">\n          {{ favorite.name }}\n        </li>\n      </div>\n\n      <button v-on:click=\"logout\">Logout</button>\n    </div>\n\n    <div v-else-if=\"loginForm\" id=\"loginForm\">\n      <h2>Login</h2>\n      <small>\n        (Form is prefilled for demonstration purposes; remove in final\n        application)\n      </small>\n      <div>\n        <label>\n          Email:\n          <input type=\"text\" v-model=\"data.email\" />\n        </label>\n      </div>\n      <div>\n        <label>\n          Password:\n          <input type=\"password\" v-model=\"data.password\" />\n        </label>\n      </div>\n    </div>\n    <span v-if=\"loginForm && this.user == false\">\n      <button v-on:click=\"login\">Login</button>\n      <ul v-if=\"errors\">\n        <li class=\"error\" v-for=\"(error, index) in errors\" :key=\"index\">\n          {{ error }}\n        </li>\n      </ul>\n      <p>Or create new user</p>\n      <button\n        v-on:click=\"\n          registerForm = true;\n          loginForm = false;\n        \"\n      >\n        Create user\n      </button>\n    </span>\n    <div v-if=\"registerForm && !this.user\" id=\"registerForm\">\n      <h2>Register</h2>\n      <div>\n        <label>\n          Name:\n          <input type=\"text\" v-model=\"registrationData.name\" />\n        </label>\n      </div>\n      <div>\n        <label>\n          Email:\n          <input type=\"text\" v-model=\"registrationData.email\" />\n        </label>\n      </div>\n      <div>\n        <label>\n          Password:\n          <input type=\"password\" v-model=\"registrationData.password\" />\n        </label>\n      </div>\n\n      <button v-on:click=\"createUser\">Create user</button>\n      <p>Or login with existing user</p>\n      <button\n        v-on:click=\"\n          loginForm = true;\n          registerForm = false;\n        \"\n      >\n        Login\n      </button>\n\n      <ul v-if=\"errors\">\n        <li class=\"error\" v-for=\"(error, index) in errors\" :key=\"index\">\n          {{ error }}\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { axios } from \"@/common/app.js\";\n\nexport default {\n  data() {\n    return {\n      // Form is prefilled for demonstration purposes; remove in final application\n      // jill@harvard.edu/asdfasdf is one of our seed users from e28api/seeds/user.json\n      registerForm: true,\n      loginForm: false,\n      data: {\n        email: \"jill@harvard.edu\",\n        password: \"asdfasdf\",\n      },\n      registrationData: {\n        name: \"\",\n        email: \"\",\n        password: \"\",\n      },\n      errors: null,\n      favorites: [],\n    };\n  },\n  computed: {\n    user() {\n      return this.$store.state.user;\n    },\n    products() {\n      return this.$store.state.products;\n    },\n  },\n  methods: {\n    loadFavorites() {\n      if (this.user) {\n        axios.get(\"favorite/query?user_id=\" + this.user.id).then((response) => {\n          this.favorites = response.data.favorite.map((favorite) => {\n            return this.$store.getters.getProductById(favorite.product_id);\n          });\n        });\n      }\n    },\n    login() {\n      axios.post(\"login\", this.data).then((response) => {\n        if (response.data.authenticated) {\n          this.$store.commit(\"setUser\", response.data.user);\n        } else {\n          this.errors = response.data.errors;\n        }\n      });\n    },\n    logout() {\n      axios.post(\"logout\").then((response) => {\n        if (response.data.success) {\n          this.$store.commit(\"setUser\", null);\n        }\n      });\n    },\n    createUser() {\n      axios.post(\"register\", this.registrationData).then((response) => {\n        if (response.data.authenticated) {\n          this.$store.commit(\"setUser\", response.data.user);\n        } else {\n          this.errors = response.data.errors;\n        }\n      });\n      this.data = this.registrationData;\n      this.loginForm = true;\n      this.registerForm = false;\n    },\n  },\n  watch: {\n    user() {\n      this.loadFavorites();\n    },\n  },\n  mounted() {\n    this.loadFavorites();\n  },\n};\n</script>","import { render } from \"./AccountPage.vue?vue&type=template&id=48fd380a\"\nimport script from \"./AccountPage.vue?vue&type=script&lang=js\"\nexport * from \"./AccountPage.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}